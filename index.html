<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>蕾蕾小红娘</title>
    <style>
        body {
            font-family: 'Cursive', sans-serif;
            background: linear-gradient(135deg, #ffe6f7, #ffc2e4);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }
        h1 {
            color: #ff69b4;
            margin-bottom: 20px;
            font-size: 24px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #ff69b4;
            font-size: 18px;
        }
        input[type="text"], select {
            width: calc(100% - 22px);
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #ff69b4;
            border-radius: 25px;
            transition: border-color 0.3s;
            outline: none;
            font-size: 16px;
        }
        input[type="text"]:focus, select:focus {
            border-color: #ff1493;
        }
        button {
            padding: 15px 30px;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 16px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            background-color: #ff1493;
        }
        .result, .error-message {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }
        .loading {
            animation: loadingAnimation 5s linear infinite;
        }
        @keyframes loadingAnimation {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        .love-message {
            margin-top: 20px;
            font-style: italic;
            color: #ff69b4;
            font-size: 16px;
        }
        .location-button-container {
            margin-top: 10px;
            text-align: right;
        }
        .location-button-container button {
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        .disclaimer {
            margin-top: 30px;
            font-size: 12px;
            color: #888;
        }
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            input[type="text"], select, button {
                padding: 12px;
            }
            button {
                padding: 12px 24px;
            }
            .location-button-container button {
                padding: 6px 14px;
            }
            h1 {
                font-size: 22px;
            }
            label {
                font-size: 16px;
            }
            .result, .error-message, .love-message {
                font-size: 16px;
            }
        }
        .heart-icon {
            font-size: 24px;
            color: #ff69b4;
        }
        .decorative-heart-left {
            position: absolute;
            top: 10%;
            left: 5%;
            transform: rotate(-20deg);
            font-size: 50px;
            color: #ff69b4;
            opacity: 0.5;
            z-index: -1;
        }
        .decorative-heart-right {
            position: absolute;
            top: 10%;
            right: 5%;
            transform: rotate(20deg);
            font-size: 50px;
            color: #ff69b4;
            opacity: 0.5;
            z-index: -1;
        }
        .emoji {
            font-size: 24px;
            color: #ff69b4;
        }
        .emoji-large {
            font-size: 48px;
            color: #ff69b4;
            margin: 10px;
        }
        .background-balloons {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background-image: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ccircle cx=%2220%22 cy=%2220%22 r=%2210%22 fill=%22#ff69b4%22/%3E%3Ccircle cx=%2250%22 cy=%2230%22 r=%2215%22 fill=%22#ff1493%22/%3E%3Ccircle cx=%2280%22 cy=%2225%22 r=%2212%22 fill=%22#ff69b4%22/%3E%3C/svg%3E');
            background-repeat: repeat-x;
            background-size: 100px 100px;
            animation: floatBalloons 10s ease-in-out infinite;
        }
        @keyframes floatBalloons {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>😊 蕾蕾小红娘 💖</h1>
    <label for="gender">性别:</label>
    <select id="gender">
        <option value="">请选择性别</option>
        <option value="男">男 👨‍🦳</option>
        <option value="女">女 👩‍❤️‍👩</option>
    </select>
    <br>
    <label for="name">姓名:</label>
    <input type="text" id="name" placeholder="请输入您的姓名 📝">
    <br>
    <button id="calculateButton">测一测 🔮</button>
    <div class="error-message" id="errorMessage"></div>
    <div class="result" id="pairResult"></div>
    <div class="location-button-container">
        <button id="locationButton" style="display:none;">测算位置 📍</button>
    </div>
    <div class="result" id="locationResult"></div>
    <div class="love-message" id="loveMessage"></div>
    <div class="disclaimer">
        本工具仅供娱乐参考，结果不具备科学依据，不应作为决策依据. 💬
    </div>
</div>
<span class="decorative-heart-left">&#10084;</span>
<span class="decorative-heart-right">&#10084;</span>
<div class="background-balloons"></div>

<script>
    const coupleLibrary = {
        "周友来": { female: "胡蕾", location: "安徽-合肥" },
        "胡蕾": { male: "周友来", location: "安徽-合肥" },
        "胡卫政": { female: "王道芹", location: "安徽-合肥" },
        "王道芹": { male: "胡卫政", location: "安徽-合肥" },
        "陈嘉良": { female: "周友平", location: "安徽-合肥" },
        "周友平": { male: "陈嘉良", location: "安徽-合肥" },
        "李昀锐": { female: "孟子义", location: "北京" },
        "孟子义": { male: "李昀锐", location: "北京"},
        "范学峰": { female: "周友萍", location: "北京" },
        "周友萍": { male: "范学峰", location: "北京" },
        "周谋立": { female: "胡荣生", location: "安徽-合肥" },
        "胡荣生": { male: "周谋立", location: "安徽-合肥" },
        "黄子韬": { female: "徐艺洋", location: "北京" },
        "徐艺洋": { male: "黄子韬", location: "北京" },
        "马云": { female: "张瑛", location: "浙江-杭州" },
        "张瑛": { male: "马云", location: "浙江-杭州" }
    };
    const loveQuotesLibrary = {
        "周友来": [
            "做我的小朋友，在我身后，在我左右❤️",
            "老婆，我爱你。 ❤️",
            "最最喜欢你啦。 😘",
            "我会做，最爱你的那一位。 💑",
            "我好想你，每分每秒。 ❤️",
            "希望下次、下下次、往后的生活，都有你在身边。 ❤️",
            "遇见你是我最大的幸运。 💑"
        ],
        "胡蕾": [
            "做你的小朋友，在你身后，在你左右❤️",
            "无需节日赋予意义，我时刻爱你。 💖",
            "有你在的时候其他男生的好，好像也没那么好了。 😻",
            "不会有比你更好的男生了。 ✨"
        ]
    };
    const surnames = [
    "李", "王", "张", "刘", "陈", "杨", "赵", "黄", "周", "吴",
    "徐", "孙", "胡", "朱", "高", "林", "何", "郭", "马", "罗",
    "梁", "宋", "郑", "谢", "韩", "唐", "冯", "于", "董", "萧",
    "程", "曹", "袁", "邓", "许", "傅", "沈", "曾", "彭", "吕",
    "苏", "卢", "蒋", "蔡", "贾", "丁", "魏", "薛", "叶", "阎",
    "余", "潘", "杜", "戴", "夏", "钟", "汪", "田", "任", "姜",
    "范", "方", "石", "姚", "谭", "廖", "邹", "熊", "金", "陆",
    "郝", "孔", "崔", "康", "毛", "邱", "秦", "江", "史", "顾",
    "侯", "邵", "孟", "龙", "万", "段", "雷", "钱", "汤", "尹",
    "黎", "易", "常", "武", "乔", "贺", "赖", "龚", "文", "庞"
];
    const doubleSurnames = ["欧阳", "上官", "司马", "诸葛", "夏侯",
    "闻人", "东方", "赫连", "皇甫", "尉迟",
    "公羊", "澹台", "公冶", "宗政", "濮阳",
    "淳于", "单于", "太叔", "申屠", "公孙",
    "仲孙", "轩辕", "令狐", "钟离", "宇文",
    "长孙", "慕容", "鲜于", "闾丘", "司徒"];
    const femaleNames = ["敏", "艳", "丽", "华", "梅", "静", "芳", "瑶", "婷", "娜",
    "慧", "娟", "洁", "玲", "琳", "雅", "琪", "妍", "欣", "怡",
    "萱", "莹", "思", "婧", "雯", "玥", "昕", "馨", "岚", "妍",
    "悦", "蓉", "悦", "芷", "曼", "蕾", "妍", "怡", "婕", "璇",
    "雪", "菲", "佳", "萱", "薇", "欣", "妍", "瑶", "婷", "怡"];
    const maleNames = ["强", "勇", "刚", "明", "杰", "伟", "峰", "洋", "浩", "雷",
    "博", "涛", "超", "军", "平", "辉", "翔", "阳", "志", "龙",
    "飞", "宇", "鹏", "帅", "楠", "凯", "晨", "昊", "丞", "霖",
    "轩", "烁", "振", "帆", "泽", "铭", "锋", "骏"];
    const randomLoveQuotes = [
        "你是我的唯一。",
    "有你在的地方就有阳光。",
    "与你相遇是我一生中最美好的决定。",
    "在每一个晨光里，我最先想到你。",
    "你是我永远的目的地。",
    "爱，就是与你共度平凡日子。",
    "你是我生活的日月星辰。",
    "你是我唯一的宁静。",
    "愿用全部，换与你相守的瞬间。",
    "你的笑容，是我抵御寒冷的暖阳。",
    "遇见你，结婚我没想过别人。",
    "你是我人生的亮色。",
    "每颗星星都像你眼中的光芒。",
    "和你在一起的时光都很耀眼。",
    "你的眼眸，藏着星辰大海。",
    "爱你，是我做过最好的事。",
    "心跳多久，爱你多久。",
    "你是我平淡生活里的奇迹。",
    "遇见你，是最美的意外。",
    "世界再大，我的眼里只有你。",
    "你是我永远不愿醒来的梦。",
    "一想起你，我就满心欢喜。",
    "爱你，是我一生的课题。"
    ];
    const randomLocations = [
        "江苏-南京", "江苏-苏州", "江苏-无锡", "江苏-常州", "浙江-杭州", "浙江-宁波", "浙江-温州", "安徽-合肥", "安徽-芜湖", "安徽-蚌埠","山东-济南", "山东-青岛", "山东-烟台", "上海","广东-广州", "广东-深圳", "广东-珠海", "广东-东莞", "福建-福州", "福建-厦门", "福建-泉州","北京", "天津-天津", "河北-石家庄", "河北-唐山", "山西-太原", "山西-大同","四川-成都", "四川-重庆", "云南-昆明", "云南-大理", "贵州-贵阳", "贵州-遵义","陕西-西安", "甘肃-兰州", "甘肃-天水", "新疆-乌鲁木齐", "新疆-喀什","辽宁-沈阳", "辽宁-大连", "辽宁-鞍山", "吉林-长春", "吉林-吉林", "黑龙江-哈尔滨", "黑龙江-大庆","河南-郑州", "河南-洛阳", "湖北-武汉", "湖北-宜昌", "湖南-长沙", "湖南-岳阳", "江西-南昌", "江西-九江","海南-海口", "海南-三亚", "广西-南宁", "广西-桂林","内蒙古-呼和浩特", "内蒙古-包头", "宁夏-银川", "青海-西宁", "西藏-拉萨", "广西-北海","香港-香港", "澳门-澳门"
    ];

    let previousInputs = {};
    let currentPairName = "";

    document.getElementById('gender').addEventListener('change', clearResults);
    document.getElementById('name').addEventListener('input', clearResults);
    document.getElementById('calculateButton').addEventListener('click', calculatePair);
    document.getElementById('locationButton').addEventListener('click', calculateLocation);

    function clearResults() {
        document.getElementById("pairResult").innerHTML = "";
        document.getElementById("locationResult").innerHTML = "";
        document.getElementById("locationButton").style.display = "none";
        document.getElementById("errorMessage").innerText = "";
        document.getElementById("loveMessage").innerText = "";
        currentPairName = "";
    }

    async function calculatePair() {
        const gender = document.getElementById("gender").value;
        const name = document.getElementById("name").value;
        const errorMessageDiv = document.getElementById("errorMessage");
        const pairResultDiv = document.getElementById("pairResult");
        const locationButton = document.getElementById("locationButton");

        if (!gender || !name) {
            errorMessageDiv.innerText = "请填写完整的性别和姓名！ ❗";
            return;
        }

        if (name.length < 2) {
            errorMessageDiv.innerText = "请输入至少两个字的完整姓名！ ✒️";
            return;
        }

        // Hide location button and result initially
        locationButton.style.display = "none";
        document.getElementById("locationResult").innerHTML = "";

        const key = `${gender}-${name}`;

        if (previousInputs[key]) {
            const { pairName, location } = previousInputs[key];
            pairResultDiv.innerHTML = `<span class="loading">正在推演...</span>`;
            setTimeout(() => {
                pairResultDiv.innerHTML = `你的有缘人：<span class="heart-icon">&#10084;</span>${pairName} 💌`;
                locationButton.style.display = "block";
                currentPairName = pairName;
                setRandomLoveQuote(pairName);
                if (location) {
                    document.getElementById("locationResult").innerHTML = ""; // Clear location result
                }
            }, 5200);
            return;
        }

        const foundCouple = coupleLibrary[name];
        let foundPairName;

        if (foundCouple) {
            if ((gender === "男" && foundCouple.female) || (gender === "女" && foundCouple.male)) {
                foundPairName = (gender === "男") ? foundCouple.female : foundCouple.male;
            }
        }

        if (!foundPairName) {
            foundPairName = generateRandomName(getOppositeGender(gender));
        }

        pairResultDiv.innerHTML = `<span class="loading">正在推演...</span>`;
        setTimeout(() => {
            pairResultDiv.innerHTML = `你的有缘人：<span class="heart-icon">&#10084;</span>${foundPairName} 💌`;
            locationButton.style.display = "block";
            const location = coupleLibrary[foundPairName]?.location || generateRandomAddress();
            previousInputs[key] = { pairName: foundPairName, location: location };
            currentPairName = foundPairName;
            setRandomLoveQuote(foundPairName);
        }, 5200);
    }

    async function calculateLocation() {
        const locationResultDiv = document.getElementById("locationResult");
        const name = document.getElementById("name").value;
        const gender = document.getElementById("gender").value;
        const key = `${gender}-${name}`;

        if (!previousInputs[key]) {
            alert("请先点击“测一测”获取结果！");
            return;
        }

        const location = previousInputs[key].location;
        locationResultDiv.innerHTML = `<span class="loading">正在推演...</span>`;
        setTimeout(() => {
            locationResultDiv.innerHTML = `可能位于：${location} 📍`;
        }, 6666);
    }

    function setRandomLoveQuote(name) {
        const quotes = loveQuotesLibrary[name] || randomLoveQuotes;
        const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById("loveMessage").innerText = randomQuote;
    }

    function generateRandomAddress() {
        return randomLocations[Math.floor(Math.random() * randomLocations.length)];
    }

    function getOppositeGender(gender) {
        return gender === "男" ? "女" : "男";
    }

    function generateRandomName(gender) {
        const firstNamePool = gender === "男" ? maleNames : femaleNames;
        let surname;
        let firstNameLength;

        // Determine the length of the first name based on given probabilities
        const randomValue = Math.random();
        if (randomValue < 0.9) {
            // 90% chance
            if (Math.random() > 0.5) {
                surname = surnames[Math.floor(Math.random() * surnames.length)]; // 单姓
                firstNameLength = 2; // 单姓 + 两字名
            } else {
                surname = doubleSurnames[Math.floor(Math.random() * doubleSurnames.length)]; // 复姓
                firstNameLength = 1; // 复姓 + 一字名
            }
        } else if (randomValue < 0.999) {
            // 9.9% chance
            surname = surnames[Math.floor(Math.random() * surnames.length)]; // 单姓
            firstNameLength = 1; // 单姓 + 一字名
        } else {
            // 0.1% chance
            surname = doubleSurnames[Math.floor(Math.random() * doubleSurnames.length)]; // 复姓
            firstNameLength = 2; // 复姓 + 两字名
        }

        let firstName = "";
        for (let i = 0; i < firstNameLength; i++) {
            firstName += firstNamePool[Math.floor(Math.random() * firstNamePool.length)];
        }

        return surname + firstName;
    }

    setInterval(() => {
        setRandomLoveQuote(currentPairName);
    }, 5200);

    document.getElementById("loveMessage").innerText = randomLoveQuotes[Math.floor(Math.random() * randomLoveQuotes.length)];

    // Ensure love message updates when inputs change
    document.getElementById('gender').addEventListener('change', () => {
        if (currentPairName) {
            setRandomLoveQuote(currentPairName);
        }
    });
    document.getElementById('name').addEventListener('input', () => {
        if (currentPairName) {
            setRandomLoveQuote(currentPairName);
        }
    });
</script>
</body>
</html>



