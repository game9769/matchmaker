<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è•¾è•¾å°çº¢å¨˜</title>
    <style>
        body {
            font-family: 'Cursive', sans-serif;
            background: linear-gradient(135deg, #ffe6f7, #ffc2e4);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        h1 {
            color: #ff69b4;
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #ff69b4;
        }
        input[type="text"], select {
            width: calc(100% - 22px);
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #ff69b4;
            border-radius: 25px;
            transition: border-color 0.3s;
            outline: none;
            font-size: 16px;
        }
        input[type="text"]:focus, select:focus {
            border-color: #ff1493;
        }
        button {
            padding: 12px 24px;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 16px;
        }
        button:hover {
            background-color: #ff1493;
        }
        .result, .error-message {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }
        .loading {
            animation: loadingAnimation 5s linear infinite;
        }
        @keyframes loadingAnimation {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        .love-message {
            margin-top: 20px;
            font-style: italic;
            color: #ff69b4;
            font-size: 16px;
        }
        .location-button-container {
            margin-top: 10px;
            text-align: right;
        }
        .location-button-container button {
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 14px;
        }
        .disclaimer {
            margin-top: 30px;
            font-size: 12px;
            color: #888;
        }
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            input[type="text"], select, button {
                padding: 10px;
            }
            button {
                padding: 10px 20px;
            }
            .location-button-container button {
                padding: 6px 14px;
            }
        }
        .heart-icon {
            font-size: 24px;
            color: #ff69b4;
        }
        .decorative-heart-left {
            position: absolute;
            top: 10%;
            left: 5%;
            transform: rotate(-20deg);
            font-size: 50px;
            color: #ff69b4;
            opacity: 0.5;
            z-index: -1;
        }
        .decorative-heart-right {
            position: absolute;
            top: 10%;
            right: 5%;
            transform: rotate(20deg);
            font-size: 50px;
            color: #ff69b4;
            opacity: 0.5;
            z-index: -1;
        }
        .emoji {
            font-size: 24px;
            color: #ff69b4;
        }
        .emoji-large {
            font-size: 48px;
            color: #ff69b4;
            margin: 10px;
        }
        .background-balloons {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background-image: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ccircle cx=%2220%22 cy=%2220%22 r=%2210%22 fill=%22#ff69b4%22/%3E%3Ccircle cx=%2250%22 cy=%2230%22 r=%2215%22 fill=%22#ff1493%22/%3E%3Ccircle cx=%2280%22 cy=%2225%22 r=%2212%22 fill=%22#ff69b4%22/%3E%3C/svg%3E');
            background-repeat: repeat-x;
            background-size: 100px 100px;
            animation: floatBalloons 10s ease-in-out infinite;
        }
        @keyframes floatBalloons {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>è•¾è•¾å°çº¢å¨˜ ğŸ˜ŠğŸ’–</h1>
    <label for="gender">æ€§åˆ«:</label>
    <select id="gender">
        <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
        <option value="ç”·">ç”· ğŸ‘¨â€ğŸ¦³</option>
        <option value="å¥³">å¥³ ğŸ‘©â€â¤ï¸â€ğŸ‘©</option>
    </select>
    <br>
    <label for="name">å§“å:</label>
    <input type="text" id="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å ğŸ“">
    <br>
    <button id="calculateButton">æµ‹ä¸€æµ‹ ğŸ”®</button>
    <div class="error-message" id="errorMessage"></div>
    <div class="result" id="pairResult"></div>
    <div class="location-button-container">
        <button id="locationButton" style="display:none;">æµ‹ç®—ä½ç½® ğŸ“</button>
    </div>
    <div class="result" id="locationResult"></div>
    <div class="love-message" id="loveMessage"></div>
    <div class="disclaimer">
        æœ¬å·¥å…·ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œç»“æœä¸å…·å¤‡ç§‘å­¦ä¾æ®ï¼Œä¸åº”ä½œä¸ºå†³ç­–ä¾æ®. ğŸ’¬
    </div>
</div>
<span class="decorative-heart-left">&#10084;</span>
<span class="decorative-heart-right">&#10084;</span>
<div class="background-balloons"></div>

<script>
    const coupleLibrary = {
        "å‘¨å‹æ¥": { female: "èƒ¡è•¾", location: "å®‰å¾½-åˆè‚¥" },
        "èƒ¡è•¾": { male: "å‘¨å‹æ¥", location: "å®‰å¾½-åˆè‚¥" }
    };
    const loveQuotesLibrary = {
        "å‘¨å‹æ¥": [
            "è€å©†ï¼Œæˆ‘çˆ±ä½ ã€‚ â¤ï¸",
            "æœ€æœ€å–œæ¬¢ä½ å•¦ã€‚ ğŸ˜˜",
            "æˆ‘ä¼šåšï¼Œæœ€çˆ±ä½ çš„é‚£ä¸€ä½ã€‚ ğŸ’‘"
        ],
        "èƒ¡è•¾": [
            "æ— éœ€èŠ‚æ—¥èµ‹äºˆæ„ä¹‰ï¼Œæˆ‘æ—¶åˆ»çˆ±ä½  ğŸ’–",
            "æœ‰ä½ åœ¨çš„æ—¶å€™å…¶ä»–ç”·ç”Ÿçš„å¥½ï¼Œå¥½åƒä¹Ÿæ²¡é‚£ä¹ˆå¥½äº†ã€‚ ğŸ˜»",
            "ä¹Ÿä¸ä¼šæœ‰æ¯”ä½ æ›´å¥½çš„ç”·ç”Ÿäº†ã€‚ âœ¨"
        ]
    };
    const surnames = ["èµµ", "é’±", "å­™", "æ", "ç‹", "å¼ ", "åˆ˜", "é™ˆ", "æ¨", "é»„"];
    const doubleSurnames = ["ä¸Šå®˜", "çº³å…°", "æ¬§é˜³", "å¸é©¬", "è¯¸è‘›"];
    const femaleNames = ["æ•", "è‰³", "ä¸½", "å", "æ¢…", "é™", "èŠ³", "ç‘¶", "å©·", "å¨œ"];
    const maleNames = ["å¼º", "å‹‡", "åˆš", "æ˜", "æ°", "ä¼Ÿ", "å³°", "æ´‹", "æµ©", "é›·"];
    const randomLoveQuotes = [
        "ä½ æ˜¯æˆ‘çš„å”¯ä¸€ã€‚ ğŸ’",
        "æœ‰ä½ åœ¨çš„åœ°æ–¹å°±æœ‰é˜³å…‰ã€‚ â˜€ï¸",
        "ä¸ä½ ç›¸é‡æ˜¯æˆ‘ä¸€ç”Ÿä¸­æœ€ç¾å¥½çš„å†³å®šã€‚ ğŸŒ¹"
    ];
    const randomLocations = [
        "æ±Ÿè‹-å—äº¬", "å®‰å¾½-åˆè‚¥", "å››å·-æˆéƒ½"
    ];

    let previousInputs = {};
    let currentPairName = "";

    document.getElementById('gender').addEventListener('change', clearResults);
    document.getElementById('name').addEventListener('input', clearResults);
    document.getElementById('calculateButton').addEventListener('click', calculatePair);
    document.getElementById('locationButton').addEventListener('click', calculateLocation);

    function clearResults() {
        document.getElementById("pairResult").innerHTML = "";
        document.getElementById("locationResult").innerHTML = "";
        document.getElementById("locationButton").style.display = "none";
        document.getElementById("errorMessage").innerText = "";
        document.getElementById("loveMessage").innerText = "";
        currentPairName = "";
    }

    async function calculatePair() {
        const gender = document.getElementById("gender").value;
        const name = document.getElementById("name").value;
        const errorMessageDiv = document.getElementById("errorMessage");
        const pairResultDiv = document.getElementById("pairResult");
        const locationButton = document.getElementById("locationButton");

        if (!gender || !name) {
            errorMessageDiv.innerText = "è¯·å¡«å†™å®Œæ•´çš„æ€§åˆ«å’Œå§“åï¼ â—";
            return;
        }

        if (name.length < 2) {
            errorMessageDiv.innerText = "è¯·è¾“å…¥è‡³å°‘ä¸¤ä¸ªå­—çš„å®Œæ•´å§“åï¼ âœ’ï¸";
            return;
        }

        // Hide location button and result initially
        locationButton.style.display = "none";
        document.getElementById("locationResult").innerHTML = "";

        const key = `${gender}-${name}`;

        if (previousInputs[key]) {
            const { pairName, location } = previousInputs[key];
            pairResultDiv.innerHTML = `<span class="loading">æ­£åœ¨æ¨æ¼”...</span>`;
            setTimeout(() => {
                pairResultDiv.innerHTML = `ä½ çš„æœ‰ç¼˜äººï¼š<span class="heart-icon">&#10084;</span>${pairName} ğŸ’Œ`;
                locationButton.style.display = "block";
                currentPairName = pairName;
                setRandomLoveQuote(pairName);
                if (location) {
                    document.getElementById("locationResult").innerHTML = ""; // Clear location result
                }
            }, 5200);
            return;
        }

        const foundCouple = coupleLibrary[name];
        let foundPairName;

        if (foundCouple) {
            if ((gender === "ç”·" && foundCouple.female) || (gender === "å¥³" && foundCouple.male)) {
                foundPairName = (gender === "ç”·") ? foundCouple.female : foundCouple.male;
            }
        }

        if (!foundPairName) {
            foundPairName = generateRandomName(getOppositeGender(gender));
        }

        pairResultDiv.innerHTML = `<span class="loading">æ­£åœ¨æ¨æ¼”...</span>`;
        setTimeout(() => {
            pairResultDiv.innerHTML = `ä½ çš„æœ‰ç¼˜äººï¼š<span class="heart-icon">&#10084;</span>${foundPairName} ğŸ’Œ`;
            locationButton.style.display = "block";
            const location = coupleLibrary[foundPairName]?.location || generateRandomAddress();
            previousInputs[key] = { pairName: foundPairName, location: location };
            currentPairName = foundPairName;
            setRandomLoveQuote(foundPairName);
        }, 5200);
    }

    async function calculateLocation() {
        const locationResultDiv = document.getElementById("locationResult");
        const name = document.getElementById("name").value;
        const gender = document.getElementById("gender").value;
        const key = `${gender}-${name}`;

        if (!previousInputs[key]) {
            alert("è¯·å…ˆç‚¹å‡»â€œæµ‹ä¸€æµ‹â€è·å–ç»“æœï¼");
            return;
        }

        const location = previousInputs[key].location;
        locationResultDiv.innerHTML = `<span class="loading">æ­£åœ¨æ¨æ¼”...</span>`;
        setTimeout(() => {
            locationResultDiv.innerHTML = `å¯èƒ½ä½äºï¼š${location} ğŸ“`;
        }, 6666);
    }

    function setRandomLoveQuote(name) {
        const quotes = loveQuotesLibrary[name] || randomLoveQuotes;
        const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById("loveMessage").innerText = randomQuote;
    }

    function generateRandomAddress() {
        return randomLocations[Math.floor(Math.random() * randomLocations.length)];
    }

    function getOppositeGender(gender) {
        return gender === "ç”·" ? "å¥³" : "ç”·";
    }

    function generateRandomName(gender) {
        const firstNamePool = gender === "ç”·" ? maleNames : femaleNames;
        let surname;
        let firstNameLength;

        // Determine the length of the first name based on given probabilities
        const randomValue = Math.random();
        if (randomValue < 0.9) {
            // 90% chance
            if (Math.random() > 0.5) {
                surname = surnames[Math.floor(Math.random() * surnames.length)]; // å•å§“
                firstNameLength = 2; // å•å§“ + ä¸¤å­—å
            } else {
                surname = doubleSurnames[Math.floor(Math.random() * doubleSurnames.length)]; // å¤å§“
                firstNameLength = 1; // å¤å§“ + ä¸€å­—å
            }
        } else if (randomValue < 0.999) {
            // 9.9% chance
            surname = surnames[Math.floor(Math.random() * surnames.length)]; // å•å§“
            firstNameLength = 1; // å•å§“ + ä¸€å­—å
        } else {
            // 0.1% chance
            surname = doubleSurnames[Math.floor(Math.random() * doubleSurnames.length)]; // å¤å§“
            firstNameLength = 2; // å¤å§“ + ä¸¤å­—å
        }

        let firstName = "";
        for (let i = 0; i < firstNameLength; i++) {
            firstName += firstNamePool[Math.floor(Math.random() * firstNamePool.length)];
        }

        return surname + firstName;
    }

    setInterval(() => {
        setRandomLoveQuote(currentPairName);
    }, 5200);

    document.getElementById("loveMessage").innerText = randomLoveQuotes[Math.floor(Math.random() * randomLoveQuotes.length)];

    // Ensure love message updates when inputs change
    document.getElementById('gender').addEventListener('change', () => {
        if (currentPairName) {
            setRandomLoveQuote(currentPairName);
        }
    });
    document.getElementById('name').addEventListener('input', () => {
        if (currentPairName) {
            setRandomLoveQuote(currentPairName);
        }
    });
</script>
</body>
</html>



